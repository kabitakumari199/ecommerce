{"ast":null,"code":"import _objectSpread from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n//calls the login API\nexport function fetchProducts() {\n  return function (dispatch) {\n    fetch('http://localhost:8000/products').then(function (res) {\n      return res.json();\n    }).catch(function (err) {\n      return fetch('db.json').then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return data.products;\n      });\n    }).then(function (data) {\n      dispatch({\n        type: \"FETCH_PRODUCT\",\n        data: data\n      });\n    });\n  };\n}\nexport function filterProducts(products, size) {\n  return function (dispatch) {\n    dispatch({\n      type: 'FILTER_PRODUCTS_BY_SIZE',\n      payload: {\n        size: size,\n        items: size === '' ? products : products.filter(function (a) {\n          return a.availableSizes.indexOf(size.toUpperCase());\n        })\n      }\n    });\n  };\n}\nexport function sortProducts(products, sort) {\n  //  const product = products.slice(); \n  if (sort !== '') {\n    products.sort(function (a, b) {\n      return sort === 'lowestprice' ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1;\n    });\n  } else {\n    products.sort(function (a, b) {\n      return a.id > b.id ? 1 : -1;\n    });\n  }\n\n  return function (dispatch) {\n    dispatch({\n      type: 'FILTER_PRODUCTS_BY_PRICE',\n      payload: {\n        sort: sort,\n        items: _toConsumableArray(products)\n      }\n    });\n  };\n}\nexport function addToCart(items, product) {\n  var cartItems = items.slice();\n  var productAlreadyInCart = false;\n  cartItems.forEach(function (item) {\n    if (item.id === product.id) {\n      item.count += 1;\n      productAlreadyInCart = true;\n    }\n  });\n\n  if (!productAlreadyInCart) {\n    cartItems.push(_objectSpread({}, product, {\n      count: 1\n    }));\n  }\n\n  localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  return function (dispatch) {\n    dispatch({\n      type: 'ADD_TO_CART',\n      payload: {\n        cartItems: cartItems\n      }\n    });\n  };\n}\nexport function deleteProduct(items, product) {\n  var cartItems = items.splice().filter(function (elm) {\n    return elm.id !== product.id;\n  });\n  return function (dispatch) {\n    dispatch({\n      type: \"DELETE_ITEM\",\n      product: product\n    });\n  };\n}","map":{"version":3,"sources":["/var/www/html/ecommerce-shopping-cart/src/actions/productAction.js"],"names":["fetchProducts","dispatch","fetch","then","res","json","catch","err","data","products","type","filterProducts","size","payload","items","filter","a","availableSizes","indexOf","toUpperCase","sortProducts","sort","b","price","id","addToCart","product","cartItems","slice","productAlreadyInCart","forEach","item","count","push","localStorage","setItem","JSON","stringify","deleteProduct","splice","elm"],"mappings":"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","sourcesContent":["//calls the login API\r\nexport function fetchProducts() {\r\n    return dispatch => {\r\n    fetch('http://localhost:8000/products').then(res => res.json())\r\n    .catch(err => fetch('db.json').then(res => res.json()).then(data => data.products))\r\n    .then(data => {\r\n      dispatch({type:\"FETCH_PRODUCT\",data});\r\n    })\r\n    }\r\n}\r\n\r\nexport function filterProducts(products,size){  \r\n    return (dispatch) =>{\r\n        dispatch({type:'FILTER_PRODUCTS_BY_SIZE', payload:{\r\n         size:size,\r\n         items:size === '' ? products:products.filter(a =>a.availableSizes.indexOf(size.toUpperCase())) \r\n        }\r\n    });\r\n }\r\n}\r\nexport function sortProducts(products,sort){ \r\n //  const product = products.slice(); \r\n  if (sort !== '') {\r\n    products.sort((a, b) =>\r\n      (sort === 'lowestprice'\r\n        ? ((a.price > b.price) ? 1 : -1)\r\n        : ((a.price < b.price) ? 1 : -1)));\r\n  } else {\r\n    products.sort((a, b) => (a.id > b.id) ? 1 : -1);\r\n  }  \r\n\r\n  return (dispatch) => {\r\n      dispatch({type:'FILTER_PRODUCTS_BY_PRICE', payload:{\r\n       sort:sort,\r\n       items:[...products] \r\n      }\r\n  });\r\n}\r\n}\r\n\r\n\r\nexport function addToCart(items, product) {\r\n  const cartItems = items.slice();\r\n  let productAlreadyInCart = false;\r\n  cartItems.forEach(item => {\r\n      if (item.id === product.id) {\r\n        item.count += 1;\r\n        productAlreadyInCart = true;\r\n      }\r\n    });\r\n    if (!productAlreadyInCart) {\r\n      cartItems.push({ ...product, count: 1 });\r\n    }\r\n    \r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n    return (dispatch) => {\r\n        dispatch({type:'ADD_TO_CART',payload:{\r\n        cartItems:cartItems\r\n        }\r\n      });\r\n    }\r\n\r\n}\r\n\r\nexport function deleteProduct(items,product){\r\n    const cartItems = items.splice().filter(elm =>elm.id!==product.id);\r\n     return (dispatch) => {\r\n        dispatch({type:\"DELETE_ITEM\",product})\r\n     }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
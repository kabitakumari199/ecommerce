{"ast":null,"code":"import _classCallCheck from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/ecommerce-shopping-cart/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/var/www/html/ecommerce-shopping-cart/src/App.js\";\nimport React, { Component } from 'react';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.handleRemoveFromCart = function (e, product) {\n      console.log(product);\n\n      _this.setState(function (state) {\n        var cartItems = state.cartItems.filter(function (a) {\n          return a.id !== product.id;\n        });\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    _this.handleAddToCart = function (e, product) {\n      e.preventDefault();\n      var cartItems = _this.state.cartItems;\n      var data = [];\n      data.push(product);\n      cartItems.forEach(function (cp) {\n        if (cp.id === product.id) {\n          cp.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n      console.log('its data', data); // this.setState(state => {\n      //   const cartItems = state.cartItems;\n      //   let productAlreadyInCart = false;\n      //   cartItems.forEach(cp => {\n      //     if (cp.id === product.id) {\n      //       cp.count += 1;\n      //       productAlreadyInCart = true;\n      //     }\n      //   });\n      //   if (!productAlreadyInCart) {\n      //     cartItems.push({ ...product, count: 1 });\n      //   }\n      //   localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      //   return { cartItems: cartItems };\n      // });\n    };\n\n    _this.listProducts = function () {\n      _this.setState(function (state) {\n        if (state.sort !== '') {\n          state.products.sort(function (a, b) {\n            return state.sort === 'lowestprice' ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1;\n          });\n        } else {\n          state.products.sort(function (a, b) {\n            return a.id > b.id ? 1 : -1;\n          });\n        }\n\n        if (state.size !== '') {\n          return {\n            filteredProducts: state.products.filter(function (a) {\n              return a.availableSizes.indexOf(state.size.toUpperCase()) >= 0;\n            })\n          };\n        }\n\n        return {\n          filteredProducts: state.products\n        };\n      });\n    };\n\n    _this.handleSortChange = function (e) {\n      _this.setState({\n        sort: e.target.value\n      });\n\n      _this.listProducts();\n    };\n\n    _this.handleSizeChange = function (e) {\n      _this.setState({\n        size: e.target.value\n      });\n\n      _this.listProducts();\n    };\n\n    _this.state = {\n      size: '',\n      sort: '',\n      cartItems: [],\n      products: [],\n      filteredProducts: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      if (localStorage.getItem('cartItems')) {\n        this.setState({\n          cartItems: JSON.parse(localStorage.getItem('cartItems'))\n        });\n      }\n\n      fetch('http://localhost:8000/products').then(function (res) {\n        return res.json();\n      }).catch(function (err) {\n        return fetch('db.json').then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          return data.products;\n        });\n      }).then(function (data) {\n        console.log(data);\n\n        _this2.setState({\n          products: data\n        });\n\n        _this2.listProducts();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"E-commerce Shopping Cart Application\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Filter, {\n        count: this.state.filteredProducts.length,\n        handleSortChange: this.handleSortChange,\n        handleSizeChange: this.handleSizeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(Products, {\n        products: this.state.filteredProducts,\n        handleAddToCart: this.handleAddToCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Basket, {\n        cartItems: this.state.cartItems,\n        handleRemoveFromCart: this.handleRemoveFromCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/var/www/html/ecommerce-shopping-cart/src/App.js"],"names":["React","Component","Products","Filter","Basket","App","handleRemoveFromCart","e","product","console","log","setState","state","cartItems","filter","a","id","localStorage","setItem","JSON","stringify","handleAddToCart","preventDefault","data","push","forEach","cp","count","productAlreadyInCart","listProducts","sort","products","b","price","size","filteredProducts","availableSizes","indexOf","toUpperCase","handleSortChange","target","value","handleSizeChange","getItem","parse","fetch","then","res","json","catch","err","length"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAO,WAAP;;IAEMC,G;;;;;AACJ,iBAAc;AAAA;;AAAA;;AACZ;;AADY,UAmBdC,oBAnBc,GAmBS,UAACC,CAAD,EAAIC,OAAJ,EAAgB;AACrCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;;AACA,YAAKG,QAAL,CAAc,UAAAC,KAAK,EAAI;AACrB,YAAMC,SAAS,GAAGD,KAAK,CAACC,SAAN,CAAgBC,MAAhB,CAAuB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACC,EAAF,KAASR,OAAO,CAACQ,EAArB;AAAA,SAAxB,CAAlB;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCC,IAAI,CAACC,SAAL,CAAeP,SAAf,CAAlC;AACA,eAAO;AAAEA,UAAAA,SAAS,EAAEA;AAAb,SAAP;AACD,OAJD;AAKD,KA1Ba;;AAAA,UA4BdQ,eA5Bc,GA4BI,UAACd,CAAD,EAAIC,OAAJ,EAAgB;AAChCD,MAAAA,CAAC,CAACe,cAAF;AADgC,UAExBT,SAFwB,GAEX,MAAKD,KAFM,CAExBC,SAFwB;AAG/B,UAAMU,IAAI,GAAG,EAAb;AACAA,MAAAA,IAAI,CAACC,IAAL,CAAUhB,OAAV;AACAK,MAAAA,SAAS,CAACY,OAAV,CAAkB,UAAAC,EAAE,EAAI;AACnB,YAAIA,EAAE,CAACV,EAAH,KAAUR,OAAO,CAACQ,EAAtB,EAA0B;AACxBU,UAAAA,EAAE,CAACC,KAAH,IAAY,CAAZ;AACAC,UAAAA,oBAAoB,GAAG,IAAvB;AACD;AACF,OALJ;AAMDnB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBa,IAAvB,EAXgC,CAYhC;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACD,KAzDa;;AAAA,UA2DdM,YA3Dc,GA2DC,YAAM;AACnB,YAAKlB,QAAL,CAAc,UAAAC,KAAK,EAAI;AACrB,YAAIA,KAAK,CAACkB,IAAN,KAAe,EAAnB,EAAuB;AACrBlB,UAAAA,KAAK,CAACmB,QAAN,CAAeD,IAAf,CAAoB,UAACf,CAAD,EAAIiB,CAAJ;AAAA,mBACjBpB,KAAK,CAACkB,IAAN,KAAe,aAAf,GACKf,CAAC,CAACkB,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAtB,GAA0B,CAAC,CAD/B,GAEKlB,CAAC,CAACkB,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAtB,GAA0B,CAAC,CAHd;AAAA,WAApB;AAID,SALD,MAKO;AACLrB,UAAAA,KAAK,CAACmB,QAAN,CAAeD,IAAf,CAAoB,UAACf,CAAD,EAAIiB,CAAJ;AAAA,mBAAWjB,CAAC,CAACC,EAAF,GAAOgB,CAAC,CAAChB,EAAV,GAAgB,CAAhB,GAAoB,CAAC,CAA/B;AAAA,WAApB;AACD;;AACD,YAAIJ,KAAK,CAACsB,IAAN,KAAe,EAAnB,EAAuB;AACrB,iBAAO;AAAEC,YAAAA,gBAAgB,EAAEvB,KAAK,CAACmB,QAAN,CAAejB,MAAf,CAAsB,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACqB,cAAF,CAAiBC,OAAjB,CAAyBzB,KAAK,CAACsB,IAAN,CAAWI,WAAX,EAAzB,KAAsD,CAA1D;AAAA,aAAvB;AAApB,WAAP;AACD;;AACD,eAAO;AAAEH,UAAAA,gBAAgB,EAAEvB,KAAK,CAACmB;AAA1B,SAAP;AACD,OAbD;AAcD,KA1Ea;;AAAA,UA2EdQ,gBA3Ec,GA2EK,UAAChC,CAAD,EAAO;AACxB,YAAKI,QAAL,CAAc;AAAEmB,QAAAA,IAAI,EAAEvB,CAAC,CAACiC,MAAF,CAASC;AAAjB,OAAd;;AACA,YAAKZ,YAAL;AACD,KA9Ea;;AAAA,UA+Eda,gBA/Ec,GA+EK,UAACnC,CAAD,EAAO;AACxB,YAAKI,QAAL,CAAc;AAAEuB,QAAAA,IAAI,EAAE3B,CAAC,CAACiC,MAAF,CAASC;AAAjB,OAAd;;AACA,YAAKZ,YAAL;AACD,KAlFa;;AAEZ,UAAKjB,KAAL,GAAa;AAAEsB,MAAAA,IAAI,EAAE,EAAR;AAAYJ,MAAAA,IAAI,EAAE,EAAlB;AAAsBjB,MAAAA,SAAS,EAAE,EAAjC;AAAqCkB,MAAAA,QAAQ,EAAE,EAA/C;AAAmDI,MAAAA,gBAAgB,EAAE;AAArE,KAAb;AAFY;AAGb;;;;yCACoB;AAAA;;AAEnB,UAAIlB,YAAY,CAAC0B,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACrC,aAAKhC,QAAL,CAAc;AAAEE,UAAAA,SAAS,EAAEM,IAAI,CAACyB,KAAL,CAAW3B,YAAY,CAAC0B,OAAb,CAAqB,WAArB,CAAX;AAAb,SAAd;AACD;;AAEDE,MAAAA,KAAK,CAAC,gCAAD,CAAL,CAAwCC,IAAxC,CAA6C,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAAhD,EACGC,KADH,CACS,UAAAC,GAAG;AAAA,eAAIL,KAAK,CAAC,SAAD,CAAL,CAAiBC,IAAjB,CAAsB,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,SAAzB,EAAyCF,IAAzC,CAA8C,UAAAvB,IAAI;AAAA,iBAAIA,IAAI,CAACQ,QAAT;AAAA,SAAlD,CAAJ;AAAA,OADZ,EAEGe,IAFH,CAEQ,UAAAvB,IAAI,EAAI;AACZd,QAAAA,OAAO,CAACC,GAAR,CAAYa,IAAZ;;AACA,QAAA,MAAI,CAACZ,QAAL,CAAc;AAAEoB,UAAAA,QAAQ,EAAER;AAAZ,SAAd;;AACA,QAAA,MAAI,CAACM,YAAL;AACD,OANH;AAOD;;;6BAmEQ;AACP,aACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWuB,gBAAX,CAA4BgB,MAA3C;AAAmD,QAAA,gBAAgB,EAAE,KAAKZ,gBAA1E;AACE,QAAA,gBAAgB,EAAE,KAAKG,gBADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAIE,oBAAC,QAAD;AAAU,QAAA,QAAQ,EAAE,KAAK9B,KAAL,CAAWuB,gBAA/B;AAAiD,QAAA,eAAe,EAAE,KAAKd,eAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF,EAOE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAE,KAAKT,KAAL,CAAWC,SAA9B;AAAyC,QAAA,oBAAoB,EAAE,KAAKP,oBAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAPF,CAHF,CADF;AAmBD;;;;EAzGeL,S;;AA4GlB,eAAeI,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Basket from './components/Basket';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = { size: '', sort: '', cartItems: [], products: [], filteredProducts: [] };\n  }\n  componentWillMount() {\n\n    if (localStorage.getItem('cartItems')) {\n      this.setState({ cartItems: JSON.parse(localStorage.getItem('cartItems')) });\n    }\n\n    fetch('http://localhost:8000/products').then(res => res.json())\n      .catch(err => fetch('db.json').then(res => res.json()).then(data => data.products))\n      .then(data => {\n        console.log(data);\n        this.setState({ products: data });\n        this.listProducts();\n      });\n  }\n\n  handleRemoveFromCart = (e, product) => {\n    console.log(product);\n    this.setState(state => {\n      const cartItems = state.cartItems.filter(a => a.id !== product.id);\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    })\n  }\n\n  handleAddToCart = (e, product) => {\n    e.preventDefault();\n     const {cartItems} = this.state;\n     const data = [];\n     data.push(product);\n     cartItems.forEach(cp => {\n          if (cp.id === product.id) {\n            cp.count += 1;\n            productAlreadyInCart = true;\n          }\n        });\n    console.log('its data',data);\n    // this.setState(state => {\n    //   const cartItems = state.cartItems;\n    //   let productAlreadyInCart = false;\n\n    //   cartItems.forEach(cp => {\n    //     if (cp.id === product.id) {\n    //       cp.count += 1;\n    //       productAlreadyInCart = true;\n    //     }\n    //   });\n\n    //   if (!productAlreadyInCart) {\n    //     cartItems.push({ ...product, count: 1 });\n    //   }\n    //   localStorage.setItem('cartItems', JSON.stringify(cartItems));\n    //   return { cartItems: cartItems };\n    // });\n  }\n\n  listProducts = () => {\n    this.setState(state => {\n      if (state.sort !== '') {\n        state.products.sort((a, b) =>\n          (state.sort === 'lowestprice'\n            ? ((a.price > b.price) ? 1 : -1)\n            : ((a.price < b.price) ? 1 : -1)));\n      } else {\n        state.products.sort((a, b) => (a.id > b.id) ? 1 : -1);\n      }\n      if (state.size !== '') {\n        return { filteredProducts: state.products.filter(a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0) };\n      }\n      return { filteredProducts: state.products };\n    })\n  }\n  handleSortChange = (e) => {\n    this.setState({ sort: e.target.value });\n    this.listProducts();\n  }\n  handleSizeChange = (e) => {\n    this.setState({ size: e.target.value });\n    this.listProducts();\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h1>E-commerce Shopping Cart Application</h1>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-md-9\">\n            <Filter count={this.state.filteredProducts.length} handleSortChange={this.handleSortChange}\n              handleSizeChange={this.handleSizeChange} />\n            <hr />\n            <Products products={this.state.filteredProducts} handleAddToCart={this.handleAddToCart} />\n          </div>\n          <div className=\"col-md-3\">\n            <Basket cartItems={this.state.cartItems} handleRemoveFromCart={this.handleRemoveFromCart} />\n          </div>\n\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}